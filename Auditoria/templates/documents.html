{% extends 'base.html' %}

{% block content %}
<h2>Documentos</h2>

<!-- Formulario para subir archivos -->
<form method="POST" enctype="multipart/form-data">
    <input type="file" name="file" class="form-control">
    <button type="submit" class="btn btn-primary mt-2">Subir Documento</button>
</form>

<!-- Lista de documentos subidos por usuarios -->
<h3 class="mt-4">Documentos subidos</h3>
<ul class="list-group">
    {% for doc, user in documents %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                {{ doc.filename }} <small>subido por {{ user.username }} el {{ doc.date_uploaded.strftime('%Y-%m-%d %H:%M') }}</small>
            </div>
            <div>
                <a class="btn btn-sm btn-outline-primary" href="{{ url_for('download', doc_id=doc.id) }}">Descargar</a>
                <form method="POST" action="{{ url_for('delete_document', doc_id=doc.id) }}" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('¿Seguro que quieres eliminar este documento?');">Eliminar</button>
                </form>
            </div>
        </li>
    {% else %}
        <li class="list-group-item">No hay documentos subidos aún.</li>
    {% endfor %}
</ul>

<!-- Enlaces externos de Google Drive -->
<h3 class="mt-4">Enlaces externos</h3>
<ul class="list-group">
    {% for link in drive_links %}
        <li class="list-group-item">
            <a href="{{ link.url }}" target="_blank">{{ link.name }}</a>
        </li>
    {% endfor %}
</ul>
{% endblock %}
